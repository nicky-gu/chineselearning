# é¡¹ç›®æ–‡ä»¶ç»“æ„

è¿™æ˜¯æ±‰å­—å­¦ä¹ åº”ç”¨çš„å®Œæ•´æ–‡ä»¶ç»“æ„æ ‘ã€‚

## ç›®å½•ç»“æ„

```
hanzi-learning/
â”‚
â”œâ”€â”€ ğŸ“± app/                          # Next.js App Router åº”ç”¨ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“‚ auth/                     # è®¤è¯ç›¸å…³
â”‚   â”‚   â””â”€â”€ actions.ts              # è®¤è¯Server Actionsï¼ˆç™»å½•ã€æ³¨å†Œã€æ•°æ®åŒæ­¥ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ ai/                       # AIåŠŸèƒ½
â”‚   â”‚   â””â”€â”€ actions.ts              # AI Server Actionsï¼ˆçº é”™ã€ç»„è¯ã€é€ å¥ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ practice/                 # ç»ƒä¹ æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ pinyin/              # æ‹¼éŸ³ç»ƒä¹ 
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx            # æ‹¼éŸ³ç»ƒä¹ é¡µé¢
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ dictation/           # å¬å†™ç»ƒä¹ 
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx            # å¬å†™ç»ƒä¹ é¡µé¢
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“‚ sound/               # å£°éŸ³æ¸¸æˆ
â”‚   â”‚       â””â”€â”€ page.tsx            # å£°éŸ³æ¸¸æˆé¡µé¢
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ ai-assistant/            # AIåŠ©æ‰‹
â”‚   â”‚   â””â”€â”€ page.tsx                # AIåŠ©æ‰‹é¡µé¢ï¼ˆå¯¹è¯ã€æ‹¼éŸ³çº é”™ã€ç»„è¯ã€é€ å¥ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ mistakes/                # é”™é¢˜æœ¬
â”‚   â”‚   â””â”€â”€ page.tsx                # é”™é¢˜æœ¬é¡µé¢
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ dashboard/               # ä»ªè¡¨æ¿
â”‚   â”‚   â””â”€â”€ page.tsx                # å­¦ä¹ ä¸­å¿ƒä»ªè¡¨æ¿
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ profile/                 # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚   â””â”€â”€ page.tsx                # ç”¨æˆ·ä¸ªäººä¿¡æ¯é¡µ
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ login/                   # ç™»å½•é¡µ
â”‚   â”‚   â””â”€â”€ page.tsx                # PINç ç™»å½•é¡µé¢
â”‚   â”‚
â”‚   â”œâ”€â”€ layout.tsx                  # æ ¹å¸ƒå±€ï¼ˆåŒ…å«Toasterï¼‰
â”‚   â”œâ”€â”€ page.tsx                    # é¦–é¡µï¼ˆäº§å“ä»‹ç»ï¼‰
â”‚   â””â”€â”€ globals.css                 # å…¨å±€æ ·å¼ï¼ˆTailwind CSSï¼‰
â”‚
â”œâ”€â”€ ğŸ¨ components/                   # Reactç»„ä»¶
â”‚   â””â”€â”€ ğŸ“‚ ui/                      # shadcn/uiç»„ä»¶
â”‚       â”œâ”€â”€ button.tsx              # æŒ‰é’®ç»„ä»¶
â”‚       â”œâ”€â”€ card.tsx                # å¡ç‰‡ç»„ä»¶
â”‚       â”œâ”€â”€ input.tsx               # è¾“å…¥æ¡†ç»„ä»¶
â”‚       â”œâ”€â”€ progress.tsx            # è¿›åº¦æ¡ç»„ä»¶
â”‚       â”œâ”€â”€ tabs.tsx                # æ ‡ç­¾é¡µç»„ä»¶
â”‚       â”œâ”€â”€ toast.tsx               # Toasté€šçŸ¥ç»„ä»¶
â”‚       â””â”€â”€ toaster.tsx             # Toastå®¹å™¨ç»„ä»¶
â”‚
â”œâ”€â”€ ğŸ› ï¸ lib/                         # å·¥å…·åº“
â”‚   â”œâ”€â”€ supabase.ts                 # Supabaseå®¢æˆ·ç«¯é…ç½®
â”‚   â”œâ”€â”€ prisma.ts                   # Prismaå®¢æˆ·ç«¯å®ä¾‹
â”‚   â”œâ”€â”€ siliconflow.ts              # ç¡…åŸºæµåŠ¨AIé›†æˆ
â”‚   â”œâ”€â”€ encryption.ts               # æ•°æ®åŠ å¯†å·¥å…·ï¼ˆAES-256ï¼‰
â”‚   â””â”€â”€ utils.ts                    # é€šç”¨å·¥å…·å‡½æ•°ï¼ˆcnç­‰ï¼‰
â”‚
â”œâ”€â”€ ğŸ“š data/                         # é™æ€æ•°æ®
â”‚   â””â”€â”€ hanzi-data.ts               # æ±‰å­—æ•°æ®ï¼ˆ100+å¸¸ç”¨æ±‰å­—ï¼‰
â”‚
â”œâ”€â”€ ğŸª hooks/                        # React Hooks
â”‚   â””â”€â”€ use-toast.ts                # Toasté€šçŸ¥hook
â”‚
â”œâ”€â”€ ğŸ’¾ prisma/                       # Prismaé…ç½®
â”‚   â””â”€â”€ schema.prisma               # æ•°æ®åº“schemaå®šä¹‰
â”‚
â”œâ”€â”€ ğŸ¯ public/                       # é™æ€èµ„æº
â”‚   â””â”€â”€ (å¾…æ·»åŠ )
â”‚
â”œâ”€â”€ âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json                # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
â”‚   â”œâ”€â”€ tsconfig.json               # TypeScripté…ç½®
â”‚   â”œâ”€â”€ tailwind.config.ts          # Tailwind CSSé…ç½®
â”‚   â”œâ”€â”€ postcss.config.js           # PostCSSé…ç½®
â”‚   â”œâ”€â”€ next.config.js              # Next.jsé…ç½®
â”‚   â”œâ”€â”€ components.json             # shadcn/uié…ç½®
â”‚   â”œâ”€â”€ vercel.json                 # Verceléƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ .env.local.example          # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â””â”€â”€ .gitignore                  # Gitå¿½ç•¥æ–‡ä»¶
â”‚
â””â”€â”€ ğŸ“– æ–‡æ¡£
    â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜æ–‡æ¡£
    â”œâ”€â”€ DEPLOYMENT.md               # éƒ¨ç½²æŒ‡å—
    â”œâ”€â”€ QUICKSTART.md               # å¿«é€Ÿå¯åŠ¨æŒ‡å—
    â”œâ”€â”€ PRD.md                      # äº§å“éœ€æ±‚æ–‡æ¡£
    â”œâ”€â”€ MIGRATION_SUMMARY.md        # è¿ç§»æ€»ç»“
    â”œâ”€â”€ PROJECT_STRUCTURE.md        # æœ¬æ–‡ä»¶
    â”œâ”€â”€ CLAUDE.md                   # Claudeä»£ç è§„èŒƒ
    â””â”€â”€ SUPABASE_SETUP.md          # Supabaseè®¾ç½®æ–‡æ¡£
```

## æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒåº”ç”¨æ–‡ä»¶ï¼ˆapp/ï¼‰

| æ–‡ä»¶ | åŠŸèƒ½ | å…³é”®ç‚¹ |
|------|------|--------|
| `layout.tsx` | æ ¹å¸ƒå±€ | åŒ…å«å…¨å±€æ ·å¼å’ŒToaster |
| `page.tsx` | é¦–é¡µ | äº§å“ä»‹ç»å’ŒåŠŸèƒ½å±•ç¤º |
| `login/page.tsx` | ç™»å½•é¡µ | 8ä½PINç è®¤è¯ |
| `dashboard/page.tsx` | ä»ªè¡¨æ¿ | å­¦ä¹ ä¸­å¿ƒå¯¼èˆª |
| `practice/pinyin/page.tsx` | æ‹¼éŸ³ç»ƒä¹  | æ‹¼éŸ³å­¦ä¹ å’Œçº é”™ |
| `practice/dictation/page.tsx` | å¬å†™ç»ƒä¹  | å¬åŠ›ç†è§£è®­ç»ƒ |
| `practice/sound/page.tsx` | å£°éŸ³æ¸¸æˆ | å£°è°ƒè¾¨è¯†æ¸¸æˆ |
| `mistakes/page.tsx` | é”™é¢˜æœ¬ | é”™é¢˜å¤ä¹ å’Œç®¡ç† |
| `ai-assistant/page.tsx` | AIåŠ©æ‰‹ | æ™ºèƒ½å¯¹è¯å’Œå·¥å…· |
| `profile/page.tsx` | ä¸ªäººä¸­å¿ƒ | ç”¨æˆ·ä¿¡æ¯å’Œç»Ÿè®¡ |

### Server Actions

| æ–‡ä»¶ | åŠŸèƒ½ | ä¸»è¦æ–¹æ³• |
|------|------|----------|
| `auth/actions.ts` | è®¤è¯ | `authenticateWithPin`, `syncLearningData`, `saveMistake` |
| `ai/actions.ts` | AIåŠŸèƒ½ | `checkPinyinCorrection`, `generateWords`, `chatWithAI` |

### å·¥å…·åº“ï¼ˆlib/ï¼‰

| æ–‡ä»¶ | åŠŸèƒ½ | å¯¼å‡º |
|------|------|------|
| `supabase.ts` | æ•°æ®åº“å®¢æˆ·ç«¯ | `supabase`, `Database` ç±»å‹ |
| `prisma.ts` | Prismaå®¢æˆ·ç«¯ | `prisma` å®ä¾‹ |
| `siliconflow.ts` | AIæœåŠ¡ | `siliconflow`, `MODELS`, `logAIInteraction` |
| `encryption.ts` | æ•°æ®åŠ å¯† | `encryptData`, `decryptData`, `hashPin` |
| `utils.ts` | å·¥å…·å‡½æ•° | `cn` (classNameåˆå¹¶) |

### UIç»„ä»¶ï¼ˆcomponents/ui/ï¼‰

æ‰€æœ‰shadcn/uiç»„ä»¶ï¼Œæä¾›ä¸€è‡´çš„è®¾è®¡ç³»ç»Ÿã€‚

### æ•°æ®æ–‡ä»¶ï¼ˆdata/ï¼‰

| æ–‡ä»¶ | å†…å®¹ | ç”¨é€” |
|------|------|------|
| `hanzi-data.ts` | 100+å¸¸ç”¨æ±‰å­— | æ‹¼éŸ³ã€ç¬”ç”»ã€éƒ¨é¦–ç­‰ä¿¡æ¯ |

### é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | ç”¨é€” |
|------|------|
| `package.json` | ä¾èµ–ç®¡ç†ï¼ˆNext.js 14, Prisma, Tailwindç­‰ï¼‰ |
| `tsconfig.json` | TypeScripté…ç½® |
| `tailwind.config.ts` | Tailwind CSSä¸»é¢˜å’Œé…ç½® |
| `next.config.js` | Next.jsåº”ç”¨é…ç½® |
| `vercel.json` | Verceléƒ¨ç½²é…ç½® |
| `.env.local.example` | ç¯å¢ƒå˜é‡æ¨¡æ¿ |

### æ•°æ®åº“Schemaï¼ˆprisma/schema.prismaï¼‰

å®šä¹‰äº†4ä¸ªä¸»è¦è¡¨ï¼š
- `User` - ç”¨æˆ·ä¿¡æ¯
- `LearningData` - å­¦ä¹ æ•°æ®ï¼ˆåŠ å¯†ï¼‰
- `AiInteraction` - AIäº¤äº’è®°å½•
- `AiUsageQuota` - AIé…é¢ç®¡ç†

## è·¯ç”±ç»“æ„

Next.js 14 App RouteråŸºäºæ–‡ä»¶ç³»ç»Ÿçš„è·¯ç”±ï¼š

```
/                    â†’ é¦–é¡µ
/login               â†’ ç™»å½•é¡µ
/dashboard           â†’ ä»ªè¡¨æ¿
/practice/pinyin     â†’ æ‹¼éŸ³ç»ƒä¹ 
/practice/dictation  â†’ å¬å†™ç»ƒä¹ 
/practice/sound      â†’ å£°éŸ³æ¸¸æˆ
/mistakes            â†’ é”™é¢˜æœ¬
/ai-assistant        â†’ AIåŠ©æ‰‹
/profile             â†’ ä¸ªäººä¸­å¿ƒ
```

## æ•°æ®æµ

```
ç”¨æˆ·è¾“å…¥
  â†“
Client Component (page.tsx)
  â†“
Server Action (actions.ts)
  â†“
Supabase/Prisma (æ•°æ®åº“)
  â†“
ç¡…åŸºæµåŠ¨AI (AIæœåŠ¡)
  â†“
å“åº”è¿”å›
  â†“
UIæ›´æ–°
```

## å®‰å…¨æ¶æ„

```
ç¯å¢ƒå˜é‡
  â†“
åŠ å¯†å·¥å…· (encryption.ts)
  â†“
PINç è®¤è¯
  â†“
Supabase RLSç­–ç•¥
  â†“
æ•°æ®éš”ç¦»
```

## æŠ€æœ¯æ ˆåˆ†å±‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     UIå±‚ (React + Tailwind)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   åº”ç”¨å±‚ (Next.js App Router)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é€»è¾‘å±‚ (Server Actions)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ•°æ®å±‚ (Supabase + Prisma)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æœåŠ¡å±‚ (ç¡…åŸºæµåŠ¨AI)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ–‡ä»¶å¤§å°ç»Ÿè®¡

```
ç±»å‹          æ–‡ä»¶æ•°    ä»£ç è¡Œæ•°    è¯´æ˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
é¡µé¢          10        ~3000      ç”¨æˆ·ç•Œé¢
ç»„ä»¶           7         ~800      UIç»„ä»¶
Server Actions 2         ~500      åç«¯é€»è¾‘
å·¥å…·åº“         5         ~400      å·¥å…·å‡½æ•°
é…ç½®           8         ~200      é…ç½®æ–‡ä»¶
æ–‡æ¡£           8        ~3000      æ–‡æ¡£
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡          40        ~7900      é¡¹ç›®æ•´ä½“
```

## æ‰©å±•å»ºè®®

å¦‚éœ€æ·»åŠ æ–°åŠŸèƒ½ï¼Œå»ºè®®åœ¨ç›¸åº”ç›®å½•ä¸‹åˆ›å»ºï¼š

- æ–°é¡µé¢ï¼š`app/æ–°åŠŸèƒ½/page.tsx`
- æ–°ç»„ä»¶ï¼š`components/æ–°ç»„ä»¶.tsx`
- æ–°å·¥å…·ï¼š`lib/æ–°å·¥å…·.ts`
- æ–°æ•°æ®ï¼š`data/æ–°æ•°æ®.ts`

---

*æœ€åæ›´æ–°: 2025å¹´1æœˆ*
